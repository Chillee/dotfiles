#!/bin/sh

flavor=${1:-bar}
case "$flavor" in
	bar)
		cat "$PANEL_FIFO" | panel_bar | bar &
		;;
esac

#clock -sf 'C[%a %b %d] [%l:%M %P]' &
bspc control --put-status
conky > "$PANEL_FIFO" &

function cleanup() {
	for proc in $(jobs -pr); do
		# Sub-processes may be chained, so if one is killed, they may not all still exist
		[ "$(jobs -pr | grep $proc)" ] && kill $proc
	done
}

trap cleanup SIGTERM SIGINT EXIT
wait
